# PDF Podcast Generator

PDFãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å¯¾è©±å½¢å¼ã®ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆéŸ³å£°ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹Python CLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## ğŸ“– æ¦‚è¦

ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®å‡¦ç†ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ï¼š

1. **PDFè§£æ**: PDFãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ç« ã”ã¨ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡º
2. **å¯¾è©±ã‚¹ã‚¯ãƒªãƒ—ãƒˆç”Ÿæˆ**: Gemini AIã‚’ä½¿ã£ã¦å„ç« ã‚’2äººã®å¯¾è©±å½¢å¼ã«å¤‰æ›
3. **éŸ³å£°ç”Ÿæˆ**: Gemini TTSã®ãƒãƒ«ãƒã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼æ©Ÿèƒ½ã§è‡ªç„¶ãªå¯¾è©±éŸ³å£°ã‚’ä½œæˆ
4. **éŸ³å£°ç·¨é›†**: ç« åˆ¥éŸ³å£°ã®é€£çµã€BGMè¿½åŠ ã€ãƒãƒ£ãƒ—ã‚¿ãƒ¼æƒ…å ±ã®åŸ‹ã‚è¾¼ã¿

## âœ¨ ä¸»ãªæ©Ÿèƒ½

- ğŸ¤– **AIãƒ™ãƒ¼ã‚¹ã®ç« æ¤œå‡º**: Gemini AIãŒæ–‡æ›¸æ§‹é€ ã‚’ç†è§£ã—ã¦ç« ã‚’è‡ªå‹•åˆ†å‰²
- ğŸ­ **ãƒãƒ«ãƒã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼å¯¾è©±**: ãƒ›ã‚¹ãƒˆã¨ã‚²ã‚¹ãƒˆã«ã‚ˆã‚‹è‡ªç„¶ãªæ›ã‘åˆã„
- ğŸµ **é«˜å“è³ªéŸ³å£°ç”Ÿæˆ**: Gemini 2.5 Pro TTS Preview ã«ã‚ˆã‚‹24è¨€èªå¯¾å¿œ
- ğŸ“‘ **ãƒãƒ£ãƒ—ã‚¿ãƒ¼æ©Ÿèƒ½**: å†ç”Ÿã‚¢ãƒ—ãƒªã§ã‚¹ã‚­ãƒƒãƒ—å¯èƒ½ãªãƒãƒ£ãƒ—ã‚¿ãƒ¼æƒ…å ±ã‚’åŸ‹ã‚è¾¼ã¿
- âš¡ **ä¸¦åˆ—å‡¦ç†**: è¤‡æ•°ç« ã‚’åŒæ™‚å‡¦ç†ã—ã¦é«˜é€ŸåŒ–
- ğŸ”„ **å†å®Ÿè¡Œåˆ¶å¾¡**: æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦åŠ¹ç‡çš„ãªéƒ¨åˆ†å®Ÿè¡Œ
- ğŸ“Š **è±Šå¯Œãªãƒ­ã‚°**: ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã¨è©³ç´°ãƒ­ã‚°ã§é€²è¡ŒçŠ¶æ³ã‚’æŠŠæ¡

## ğŸ›  ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### å‰ææ¡ä»¶

- Python 3.10ä»¥ä¸Š
- FFmpegï¼ˆéŸ³å£°å‡¦ç†ç”¨ï¼‰
- Google Gemini API ã‚­ãƒ¼

### Pythonç’°å¢ƒã®æº–å‚™

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://https://github.com/yheihei/pdf-to-podcast
cd pdf-to-podcast

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt
```

### FFmpegã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**macOS:**
```bash
brew install ffmpeg
```

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install ffmpeg
```

**Windows:**
[FFmpegå…¬å¼ã‚µã‚¤ãƒˆ](https://ffmpeg.org/download.html)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

### API ã‚­ãƒ¼ã®è¨­å®š

Google AI Studio ã§ Gemini API ã‚­ãƒ¼ã‚’å–å¾—ã—ã€ç’°å¢ƒå¤‰æ•°ã«è¨­å®šï¼š

```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
echo "GOOGLE_API_KEY=your_api_key_here" > .env

# ã¾ãŸã¯ç’°å¢ƒå¤‰æ•°ã§è¨­å®š
export GOOGLE_API_KEY="your_api_key_here"
```

## ğŸš€ ä½¿ã„æ–¹

### åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

```bash
# æœ€å°é™ã®å®Ÿè¡Œ
python -m pdf_podcast --input book.pdf --output-dir ./output

# è©³ç´°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»˜ãã®å®Ÿè¡Œ
python -m pdf_podcast \
    --input book.pdf \
    --output-dir ./output \
    --model gemini-2.5-pro-preview-tts \
    --voice-host Kore \
    --voice-guest Puck \
    --bitrate 320k \
    --max-concurrency 4 \
    --skip-existing \
    --verbose
```

### ã‚³ãƒãƒ³ãƒ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ |
|-----------|------|-------------|
| `--input` | å…¥åŠ›PDFãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå¿…é ˆï¼‰ | - |
| `--output-dir` | å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆå¿…é ˆï¼‰ | - |
| `--model` | Gemini TTSãƒ¢ãƒ‡ãƒ« | `gemini-2.5-pro-preview-tts` |
| `--voice-host` | ãƒ›ã‚¹ãƒˆã®éŸ³å£° | `Kore` |
| `--voice-guest` | ã‚²ã‚¹ãƒˆã®éŸ³å£° | `Puck` |
| `--bitrate` | éŸ³å£°ãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆ | `192k` |
| `--bgm` | BGMãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆMP3ï¼‰ | ãªã— |
| `--max-concurrency` | ä¸¦åˆ—å‡¦ç†æ•° | `3` |
| `--skip-existing` | æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒƒãƒ— | `False` |
| `--verbose` | è©³ç´°ãƒ­ã‚°è¡¨ç¤º | `False` |

### ä½¿ç”¨ä¾‹

**åŸºæœ¬å®Ÿè¡Œ:**
```bash
python -m pdf_podcast --input "æŠ€è¡“æ›¸.pdf" --output-dir ./output
```

**é«˜å“è³ª+BGMä»˜ã:**
```bash
python -m pdf_podcast \
    --input "æŠ€è¡“æ›¸.pdf" \
    --output-dir ./output \
    --bitrate 320k \
    --bgm ./music/intro.mp3 \
    --verbose
```

**é«˜é€Ÿå‡¦ç†ï¼ˆä¸¦åˆ—åº¦ã‚¢ãƒƒãƒ—ï¼‰:**
```bash
python -m pdf_podcast \
    --input "æŠ€è¡“æ›¸.pdf" \
    --output-dir ./output \
    --max-concurrency 8 \
    --skip-existing
```

## ğŸ“ å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
output/
â”œâ”€â”€ manifest.json              # å‡¦ç†çŠ¶æ³ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ episode.mp3               # æœ€çµ‚ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆï¼ˆãƒãƒ£ãƒ—ã‚¿ãƒ¼ä»˜ãï¼‰
â”œâ”€â”€ scripts/                  # ç”Ÿæˆã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ 01_åºç« .txt
â”‚   â”œâ”€â”€ 02_ç¬¬1ç« _æ¦‚è¦.txt
â”‚   â””â”€â”€ 03_ç¬¬2ç« _å®Ÿè£….txt
â”œâ”€â”€ audio/                    # ç« åˆ¥éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ 01_åºç« .mp3
â”‚   â”œâ”€â”€ 02_ç¬¬1ç« _æ¦‚è¦.mp3
â”‚   â””â”€â”€ 03_ç¬¬2ç« _å®Ÿè£….mp3
â””â”€â”€ logs/                     # è©³ç´°ãƒ­ã‚°
    â””â”€â”€ tool_20250608_120000.log
```

### ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«

- **`episode.mp3`**: å…¨ç« ã‚’é€£çµã—ãŸæœ€çµ‚ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ
  - ID3v2ãƒãƒ£ãƒ—ã‚¿ãƒ¼æƒ…å ±ä»˜ã
  - å†ç”Ÿã‚¢ãƒ—ãƒªã§ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã‚¹ã‚­ãƒƒãƒ—å¯èƒ½
  - BGMä»˜ãï¼ˆæŒ‡å®šæ™‚ï¼‰

- **`manifest.json`**: å‡¦ç†é€²è¡ŒçŠ¶æ³
  ```json
  {
    "pdf_path": "book.pdf",
    "total_chapters": 5,
    "completed_chapters": 3,
    "chapters": [
      {
        "title": "åºç« ",
        "status": "completed",
        "script_file": "scripts/01_åºç« .txt",
        "audio_file": "audio/01_åºç« .mp3"
      }
    ]
  }
  ```

## ğŸµ å¯¾å¿œéŸ³å£°è¨­å®š

### åˆ©ç”¨å¯èƒ½ãªéŸ³å£°

Gemini TTSãŒå¯¾å¿œã™ã‚‹éŸ³å£°åï¼ˆä¸€éƒ¨ï¼‰:
- `Kore`, `Puck`, `Sage`, `Vale` (è‹±èª)
- `Echo`, `Felix`, `Nova`, `Zen` (å¤šè¨€èªå¯¾å¿œ)

### éŸ³å£°ã®é¸ã³æ–¹

```bash
# ç•°ãªã‚‹æ€§åˆ¥ã®çµ„ã¿åˆã‚ã›ä¾‹
--voice-host Sage --voice-guest Echo  # ç”·æ€§ + å¥³æ€§
--voice-host Nova --voice-guest Felix # å¥³æ€§ + ç”·æ€§
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**1. API ã‚­ãƒ¼ã‚¨ãƒ©ãƒ¼**
```
Error: API key not found
```
â†’ `GOOGLE_API_KEY` ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

**2. FFmpegã‚¨ãƒ©ãƒ¼**
```
FFmpeg not found
```
â†’ FFmpegãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€PATHã«è¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

**3. ãƒ¡ãƒ¢ãƒªä¸è¶³**
```
MemoryError during audio processing
```
â†’ `--max-concurrency` ã‚’ä¸‹ã’ã¦å®Ÿè¡Œ

**4. APIåˆ¶é™ã‚¨ãƒ©ãƒ¼**
```
Rate limit exceeded
```
â†’ ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰ `--skip-existing` ã§å†å®Ÿè¡Œ

### ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

**è©³ç´°ãƒ­ã‚°ã®ç¢ºèª:**
```bash
python -m pdf_podcast --input book.pdf --output-dir ./output --verbose
```

**ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª:**
```bash
tail -f ./output/logs/tool_*.log
```

**ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ç¢ºèª:**
```bash
cat ./output/manifest.json | python -m json.tool
```

## ğŸ§ª é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
# å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
pytest

# ç‰¹å®šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆ
pytest tests/test_pdf_parser.py -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ
pytest --cov=pdf_podcast tests/
```

### é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# é–‹ç™ºç”¨ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -e .
pip install pytest pytest-cov black flake8

# ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
black pdf_podcast/
flake8 pdf_podcast/
```

## ğŸ“‹ åˆ¶é™äº‹é …

- **PDFå½¢å¼**: ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºå¯èƒ½ãªPDFã®ã¿å¯¾å¿œï¼ˆç”»åƒPDFã¯éå¯¾å¿œï¼‰
- **è¨€èª**: æ—¥æœ¬èªã¨è‹±èªã§æœ€é©åŒ–ï¼ˆä»–è¨€èªã¯å®Ÿé¨“çš„ï¼‰
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º**: å¤§ããªPDFï¼ˆ500ãƒšãƒ¼ã‚¸è¶…ï¼‰ã¯å‡¦ç†æ™‚é–“ãŒé•·ããªã‚‹å¯èƒ½æ€§
- **APIåˆ¶é™**: Gemini APIã®åˆ©ç”¨åˆ¶é™ã«ä¾å­˜

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [Gemini API Documentation](https://ai.google.dev/docs)
- [Google AI Studio](https://aistudio.google.com/)
- [FFmpegå…¬å¼ã‚µã‚¤ãƒˆ](https://ffmpeg.org/)

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License
