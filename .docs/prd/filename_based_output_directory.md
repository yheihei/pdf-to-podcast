# PRD: ファイル名ベースの出力ディレクトリ構造変更

## 背景
現在の出力構造では、scriptsとaudioディレクトリ内にタイムスタンプ（例：`20241208_143022`）でサブディレクトリが作成されています。しかし、既存のscriptやaudioファイルがある場合の生成スキップ機能を実装するため、入力PDFのファイル名をベースとした一意のディレクトリ構造に変更したいと考えています。

## 現在の構造
```
output/
├── scripts/
│   └── 20241208_143022/
│       ├── chapter1.txt
│       └── chapter2.txt
├── audio/
│   └── 20241208_143022/
│       ├── chapter1.mp3
│       └── chapter2.mp3
└── manifest.json
```

## 変更後の構造
```
output/
├── scripts/
│   └── input_pdf_filename/
│       ├── chapter1.txt
│       └── chapter2.txt
├── audio/
│   └── input_pdf_filename/
│       ├── chapter1.mp3
│       └── chapter2.mp3
└── manifest.json
```

## 要件

### 1. ディレクトリ名の決定
- 入力PDFファイルのファイル名（拡張子なし）を使用
- 例：`test.pdf` → `test`、`my-book.pdf` → `my-book`

### 2. ファイル名の安全化
- OSで使用できない文字（`/`, `\`, `:`, `*`, `?`, `"`, `<`, `>`, `|`）をアンダースコア（`_`）に置換
- 連続するアンダースコアは1つにまとめる
- 先頭・末尾の空白やドットを削除

### 3. 重複処理
- 同じPDFファイル名でも異なるパスから実行される場合を考慮
- 必要に応じてディレクトリ名に連番を追加（例：`test`, `test_2`, `test_3`）

### 4. 後方互換性
- 既存のタイムスタンプベースのディレクトリとの共存を考慮
- マニフェストファイルでの管理は維持

## 変更対象ファイル
- `pdf_podcast/__main__.py`: メインロジックの変更（84行目のタイムスタンプ生成部分、232行目と287行目のディレクトリパス生成部分）
- 必要に応じて関連するテストファイルの更新

## 期待効果
- 同じPDFファイルに対する再実行時、既存ファイルの検出が容易になる
- スキップ機能の実装が簡素化される
- 出力ファイルの管理・識別が向上する