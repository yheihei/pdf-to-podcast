# Plan: シンプル化されたポッドキャスト生成システム

## PRD確認
PRDの内容を確認しました。以下の3つの主要な変更が必要です：
1. TTS処理タイムアウトの削除
2. フォールバック処理の削除  
3. episode.mp3生成の削除

## 実装Plan

### フェーズ1: TTS処理タイムアウトの削除（高優先度）

#### タスク1.1: generate_audio_with_timeoutメソッドの削除
- **ファイル**: `pdf_podcast/tts_client.py`
- **対象**: 111-160行目の`generate_audio_with_timeout`メソッド
- **作業内容**:
  - メソッド全体を削除
  - 当該メソッドを呼び出している箇所を特定
  - 直接的なTTS API呼び出しに置き換え

#### タスク1.2: タイムアウト処理の呼び出し元修正
- **ファイル**: `pdf_podcast/tts_client.py`
- **作業内容**:
  - `generate_audio_with_timeout`の呼び出し箇所を特定
  - 直接的な`generate_audio`メソッド呼び出しに変更
  - `asyncio.wait_for`の使用箇所を削除

### フェーズ2: フォールバック処理の削除（高優先度）

#### タスク2.1: generate_audio_with_retryメソッドの簡素化
- **ファイル**: `pdf_podcast/tts_client.py`
- **対象**: 258行目付近の`generate_audio_with_retry`メソッド
- **作業内容**:
  - 2000文字制限チェックロジックを削除
  - 3チャンク分割処理を削除
  - 「大規模コンテンツを検出。分割処理フォールバックを実行します」メッセージを削除
  - シンプルな1回実行ロジックに変更

#### タスク2.2: 分割処理関連のヘルパーメソッド削除
- **ファイル**: `pdf_podcast/tts_client.py`
- **作業内容**:
  - 段落分割や3チャンク処理のヘルパーメソッドがあれば削除
  - 関連するインポート文の整理

### フェーズ3: episode.mp3生成の削除（中優先度）

#### タスク3.1: _create_episodeメソッドの無効化
- **ファイル**: `pdf_podcast/__main__.py`
- **対象**: 330-392行目の`_create_episode`メソッド
- **作業内容**:
  - メソッドの呼び出しをコメントアウトまたは削除
  - 当該メソッドを呼び出しているメインフローを特定
  - episode.mp3生成を無効化

#### タスク3.2: AudioMixer呼び出しの削除
- **ファイル**: `pdf_podcast/__main__.py`
- **作業内容**:
  - `AudioMixer.concatenate_chapters`の呼び出しを削除
  - BGM追加、音声正規化関連の処理を削除
  - ID3タグとチャプタータグ処理を削除

#### タスク3.3: メインフローの調整
- **ファイル**: `pdf_podcast/__main__.py`
- **作業内容**:
  - episode.mp3生成を呼び出しているメインフローを修正
  - 章ごとのmp3生成完了後に処理を終了するよう調整
  - 不要になったインポート文を削除

### フェーズ4: テストとクリーンアップ

#### タスク4.1: 関連テストの調整
- **対象ファイル**: `tests/test_tts_client.py`
- **作業内容**:
  - 削除されたメソッドのテストを削除または修正
  - 新しいシンプルなフローのテストを追加

#### タスク4.2: 依存関係の整理
- **作業内容**:
  - 使用されなくなったインポート文の削除
  - 不要になったライブラリや依存関係の特定

#### タスク4.3: 動作確認テスト
- **作業内容**:
  - 章ごとのmp3生成が正常に動作することを確認
  - episode.mp3が生成されないことを確認
  - エラーハンドリングが適切に動作することを確認

## 実装順序

1. **フェーズ1**: TTS処理タイムアウトの削除
2. **フェーズ2**: フォールバック処理の削除
3. **フェーズ3**: episode.mp3生成の削除
4. **フェーズ4**: テストとクリーンアップ

## 想定される影響とリスク

### 正の影響
- コードの可読性向上
- 処理速度の向上
- メンテナンスの簡素化

### 潜在的リスク
- 大規模コンテンツでのエラー時の自動復旧機能の喪失
- ユーザビリティの低下（episode.mp3がない）

## 検証方法

各フェーズ完了後に以下を実行：
```bash
pytest
python -m pdf_podcast --input test/test.pdf --output-dir ./output
```

## ユーザー確認事項

1. このPlanの実装順序は適切ですか？
2. episode.mp3生成の完全削除で問題ありませんか？
3. 大規模コンテンツのフォールバック機能削除による影響は許容範囲ですか？
4. 他に考慮すべき点はありますか？

承認いただければ実装を開始します。